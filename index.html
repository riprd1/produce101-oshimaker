<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>日プ新世界 推しメーカー</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#f6f6f6;
}

/* ===== 保存サイズ固定（超重要） ===== */
#captureArea{
  width:1004px;
  height:924px;
  background:white;
  margin:auto;
  position:relative;
  overflow:hidden;
}

/* ===== ヘッダー ===== */
.banner{
  height:160px;
  background:url("https://i.imgur.com/nYBRUdd.png") center/cover no-repeat;
}

/* ===== ピラミッド ===== */
.pyramid{
  margin-top:40px;
  display:flex;
  flex-direction:column;
  gap:55px;
  align-items:center;
}

.row{
  display:flex;
  gap:70px;
  justify-content:center;
}

.card{
  width:150px;
  text-align:center;
  position:relative;
}

.avatar{
  width:150px;
  height:150px;
  border-radius:50%;
  overflow:hidden;
  border:8px solid #ddd;
  background:white;
}

/* ★ 顔つぶれ防止（containが超重要） */
.avatar img{
  width:100%;
  height:100%;
  object-fit:contain;
  background:white;
}

/* ===== 順位（下中央固定） ===== */
.rank{
  position:absolute;
  bottom:55px;
  left:50%;
  transform:translateX(-50%);
  background:#1a73e8;
  color:white;
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  border:3px solid white;
}

.name{
  margin-top:10px;
  font-size:14px;
  font-weight:bold;
}

footer{
  position:absolute;
  bottom:15px;
  width:100%;
  text-align:center;
  font-size:13px;
  color:#888;
}
button{
  margin:20px auto;
  display:block;
  padding:12px 20px;
}
</style>
</head>

<body>

<button onclick="saveImage()">画像として保存</button>

<div id="captureArea">

  <div class="banner"></div>

  <div class="pyramid" id="pyramid"></div>

  <footer>created by @12agassi</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
const trainees=[
{name:"アダム・ナガイ(ADAM)",img:"https://i.imgur.com/6QGzvRx.png"},
{name:"中丸 晏寿(AJU)",img:"https://i.imgur.com/KiZCKos.png"},
{name:"オム・スアンカワーテン(AOM)",img:"https://i.imgur.com/dDIFJSc.png"},
{name:"アーチャー・ウイ(ARCHER)",img:"https://i.imgur.com/5iIerqN.png"},
{name:"篠ヶ谷 歩夢(S.AYUMU)",img:"https://i.imgur.com/YJAdh8q.png"}
];

/* ピラミッド固定 1/2/3/5 */
const rowSizes=[1,2,3,5];

function draw(){
  const p=document.getElementById("pyramid");
  let index=0;

  rowSizes.forEach(size=>{
    const row=document.createElement("div");
    row.className="row";

    for(let i=0;i<size;i++){
      if(index>=trainees.length) break;

      const t=trainees[index];

      const card=document.createElement("div");
      card.className="card";

      card.innerHTML=`
        <div class="avatar"><img src="${t.img}"></div>
        <div class="rank">${index+1}</div>
        <div class="name">${t.name}</div>
      `;

      row.appendChild(card);
      index++;
    }
    p.appendChild(row);
  });
}

async function saveImage(){
  const canvas=await html2canvas(document.getElementById("captureArea"),{
    backgroundColor:"#fff",
    scale:2,
    useCORS:true
  });
  const link=document.createElement("a");
  link.download="oshimaker.png";
  link.href=canvas.toDataURL();
  link.click();
}

draw();
</script>

</body>
</html>
