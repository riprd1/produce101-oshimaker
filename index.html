<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>日プ新世界 推しメーカー</title>

<style>
:root{
  --blue:#1a73e8;
  --line:#e6e6e6;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f6f6f6;
}

/* ===============================
   ヘッダー
=============================== */
header{
  position:sticky;
  top:0;
  background:#fff;
  z-index:10;
  border-bottom:1px solid var(--line);
}
.topbar{padding:12px;}
h1{margin:0;font-size:20px;}
.by{margin:4px 0 0;font-size:12px;color:#666}


/* ===============================
   バナー
=============================== */
.banner{
  height:100px;
  background:url(https://i.imgur.com/nYBRUdd.png) center/cover;
  display:flex;
  align-items:center;
  justify-content:center;
}
.bannerTitle{
  background:#fff;
  padding:10px 18px;
  border-radius:999px;
  font-weight:900;
}


/* ===============================
   ★★★ ピラミッド固定エリア ★★★
   これが「絶対切れない」核心
=============================== */
.pyramidWrap{
  height:calc(100dvh - 210px);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.pyramid{
  display:flex;
  flex-direction:column;
  gap:18px;
}

/* 行 */
.row{
  display:flex;
  justify-content:center;
  gap:18px;
}

/* スロット */
.slot{
  width:82px;
  text-align:center;
}

/* 丸（少し小さく） */
.avatar{
  width:82px;
  height:82px;
  border-radius:50%;
  border:5px solid #ddd;
  overflow:hidden;
  position:relative;
  background:#fff;
}
.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:50% 35%;
}

/* ★順位：丸の真ん中下に固定 */
.rank{
  position:absolute;
  left:50%;
  bottom:4px;
  transform:translateX(-50%);
  background:var(--blue);
  color:#fff;
  border-radius:999px;
  padding:5px 9px;
  font-size:12px;
  border:2px solid #fff;
}

/* 名前 */
.name{
  margin-top:6px;
  font-size:12px;
  font-weight:700;
  word-break:break-word;
}

/* 空 */
.empty .avatar{
  opacity:.15;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
}
.empty .rank,
.empty .name{display:none;}


/* ===============================
   ボタン
=============================== */
.actions{
  display:flex;
  gap:10px;
  justify-content:center;
  padding:10px;
}
button{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid #ddd;
  background:#fff;
}


/* ===============================
   一覧（縦1列）
=============================== */
.listCard{
  background:#fff;
  margin:12px;
  border-radius:12px;
  padding:10px;
  border:1px solid var(--line);
}
.search input{
  width:100%;
  padding:10px;
  border:1px solid #ddd;
  border-radius:10px;
}

#membersWrap{
  max-height:45vh;
  overflow:auto;
}

.memberRow{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 0;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.thumb{
  width:48px;
  height:48px;
  border-radius:50%;
  overflow:hidden;
}
.thumb img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.selected{opacity:.3}

</style>
</head>


<body>

<header>
  <div class="topbar">
    <h1>日プ新世界 推しメーカー</h1>
    <p class="by">created by @12agassi</p>
  </div>
</header>

<div class="banner">
  <div class="bannerTitle">AUDITION PICK • YOUR TOP 11</div>
</div>


<!-- ★固定ピラミッド -->
<div class="pyramidWrap">
  <div id="pyramid" class="pyramid"></div>
</div>


<div class="actions">
  <button onclick="undo()">1人戻す</button>
  <button onclick="resetAll()">リセット</button>
</div>


<!-- 一覧 -->
<div class="listCard">
  <div class="search">
    <input id="search" placeholder="Search" oninput="drawMembers()">
  </div>
  <div id="membersWrap">
    <div id="members"></div>
  </div>
</div>



<script>
const rowSizes=[1,2,3,5];

const trainees=[
{name:"小林 千悟(CHISATO)",img:"https://i.imgur.com/Iu0hNBO.png"},
{name:"加藤 大樹(K.DAIKI)",img:"https://i.imgur.com/4fRk2EB.png"},
{name:"カク・ドンミン(DONGMIN)",img:"https://i.imgur.com/xZSQqMh.png"},
{name:"末川 瑛太(EITA)",img:"https://i.imgur.com/alEjKCP.png"},
{name:"保里 瑛都(H.EITO)",img:"https://i.imgur.com/IAhs4ZA.png"},
{name:"金田 栄都(K.EITO)",img:"https://i.imgur.com/tF7i1du.png"},
{name:"櫻井 楓真(FUMA)",img:"https://i.imgur.com/WIWI8Sx.png"}
];

let selected=[];


/* ===== 描画 ===== */
function drawPyramid(){
  const p=document.getElementById("pyramid");
  p.innerHTML="";
  let idx=0;

  rowSizes.forEach(size=>{
    const row=document.createElement("div");
    row.className="row";

    for(let i=0;i<size;i++){
      const s=document.createElement("div");

      if(idx<selected.length){
        const m=trainees[selected[idx]];
        s.className="slot";
        s.innerHTML=`
          <div class="avatar">
            <img src="${m.img}">
            <div class="rank">${idx+1}</div>
          </div>
          <div class="name">${m.name.replace(/$begin:math:text$\.\+$end:math:text$/,'')}</div>
        `;
      }else{
        s.className="slot empty";
        s.innerHTML=`<div class="avatar">+</div>`;
      }

      row.appendChild(s);
      idx++;
    }
    p.appendChild(row);
  });
}


function drawMembers(){
  const q=document.getElementById("search").value.toLowerCase();
  const m=document.getElementById("members");
  m.innerHTML="";

  trainees.forEach((t,i)=>{
    if(q && !t.name.toLowerCase().includes(q))return;

    const row=document.createElement("div");
    row.className="memberRow";
    if(selected.includes(i))row.classList.add("selected");

    row.innerHTML=`
      <div class="thumb"><img src="${t.img}"></div>
      <div>${t.name}</div>
    `;
    row.onclick=()=>add(i);
    m.appendChild(row);
  });
}


function add(i){
  if(selected.length>=11)return;
  if(selected.includes(i))return;
  selected.push(i);
  drawMembers();
  drawPyramid();
}
function undo(){selected.pop();drawMembers();drawPyramid();}
function resetAll(){selected=[];drawMembers();drawPyramid();}

drawMembers();
drawPyramid();
</script>

</body>
</html>
